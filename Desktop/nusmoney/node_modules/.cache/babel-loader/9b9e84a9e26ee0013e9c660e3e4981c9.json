{"ast":null,"code":"var _jsxFileName = \"/Users/shaohualoo/Desktop/Fintech PC2 DevKit1 Code/DAY2/nusmoney project/src/App.js\";\n\n/* Demo for FinTech@SG Course \nGeneration of Charts Based on JSON data from Server\nAuthor: Prof Bhojan Anand */\n//Install d3.js:   npm install d3 --save\nimport React from \"react\";\nimport logo from \"./brand-logo.png\";\nimport * as d3 from 'd3';\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n  }\n\n  callAPIServerAccounts() {\n    // when component mounted, start a GET request\n    // to specified URL\n    fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/accounts\").then(res => res.text()).then(res => this.setState({\n      data: JSON.parse(res)\n    })).catch(err => err);\n  }\n\n  callAPIServerCustomers() {\n    // when component mounted, start a GET request\n    // to specified URL\n    fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/customers\").then(res => res.text()).then(res => this.setState({\n      data: JSON.parse(res)\n    })).catch(err => err);\n  }\n\n  callAPIServerTransactions() {\n    // when component mounted, start a GET request\n    // to specified URL\n    fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/customers\").then(res => res.text()).then(res => this.setState({\n      data: JSON.parse(res)\n    })).catch(err => err);\n  }\n\n  accountsButton() {\n    this.callAPIServerAccounts();\n    this.state.data.forEach(function (d) {\n      d.balance = d.balance.replace(/[^0-9.-]+/g, \"\"); //regular expression to convert currency to Numeric form\n    });\n    this.showChartAccounts(); //improved version way to chart\n  }\n\n  customersButton() {\n    this.callAPIServerCustomers();\n  }\n\n  transactionsButton() {\n    this.callAPIServerTransactions();\n    this.state.data.forEach(function (d) {\n      d.amount = d.amount.replace(/[^0-9.-]+/g, \"\"); //regular expression to convert currency to Numeric form\n    });\n  }\n\n  showChartAccounts() {\n    const margin = {\n      top: 50,\n      right: 50,\n      bottom: 50,\n      left: 50\n    };\n    var width = 960 - margin.left - margin.right;\n    var height = 500 - margin.top - margin.bottom;\n    var svg = d3.select(\"#barChart\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    svg.selectAll(\"*\").remove();\n    var x = d3.scaleBand().range([0, width]);\n    var y = d3.scaleLinear().range([height, 0]);\n    x.domain(this.state.data.map(details => details.account));\n    y.domain([0, d3.max(this.state.data.map(details => details.balance))]);\n    svg.selectAll(\".bar\").data(this.state.data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.account)).attr(\"width\", x.bandwidth() - 10).attr(\"y\", d => y(d.balance)).attr(\"height\", d => height - y(d.balance));\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x));\n    svg.append(\"g\").call(d3.axisLeft(y));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"App-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, \"NUSmoney App by Anuflora Bank\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"acc-btn\",\n      onClick: () => this.accountsButton(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, \"Get Accounts Data\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"myTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, this.state.data.map(item => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, \" \", item.account, \" \"), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, \" \", item.balance, \" \"));\n    }))), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, \" Visualisation of Data\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"visualisation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      id: \"barChart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/shaohualoo/Desktop/Fintech PC2 DevKit1 Code/DAY2/nusmoney project/src/App.js"],"names":["React","logo","d3","App","Component","constructor","props","state","data","callAPIServerAccounts","fetch","then","res","text","setState","JSON","parse","catch","err","callAPIServerCustomers","callAPIServerTransactions","accountsButton","forEach","d","balance","replace","showChartAccounts","customersButton","transactionsButton","amount","margin","top","right","bottom","left","width","height","svg","select","attr","append","selectAll","remove","x","scaleBand","range","y","scaleLinear","domain","map","details","account","max","enter","bandwidth","call","axisBottom","axisLeft","render","item","id"],"mappings":"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","sourcesContent":["/* Demo for FinTech@SG Course \nGeneration of Charts Based on JSON data from Server\nAuthor: Prof Bhojan Anand */\n//Install d3.js:   npm install d3 --save\nimport React from \"react\";\nimport logo from \"./brand-logo.png\";\nimport * as d3 from 'd3' \n\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { data: [] };\n  }\n\n  \n\n  callAPIServerAccounts() {\n    // when component mounted, start a GET request\n    // to specified URL\n    fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/accounts\")\n      .then(res => res.text())\n      .then(res => this.setState({ data: JSON.parse(res) }))\n      .catch(err => err);\n\n    }\n\n  callAPIServerCustomers() {\n      // when component mounted, start a GET request\n      // to specified URL\n      fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/customers\")\n        .then(res => res.text())\n        .then(res => this.setState({ data: JSON.parse(res) }))\n        .catch(err => err);\n  \n      }\n\n    callAPIServerTransactions() {\n        // when component mounted, start a GET request\n        // to specified URL\n        fetch(\"https://f92c6b35-d121-4c8a-987b-81217155297f.mock.pstmn.io/customers\")\n          .then(res => res.text())\n          .then(res => this.setState({ data: JSON.parse(res) }))\n          .catch(err => err);\n    \n        }\n  \n  accountsButton() {\n    this.callAPIServerAccounts();\n\n    this.state.data.forEach(function (d) {\n      d.balance = d.balance.replace(/[^0-9.-]+/g,\"\");  //regular expression to convert currency to Numeric form\n    });\n\n    this.showChartAccounts();  //improved version way to chart\n   } \n\n  customersButton() {\n    this.callAPIServerCustomers();\n  }\n\n  transactionsButton() {\n    this.callAPIServerTransactions();\n\n    this.state.data.forEach(function (d) {\n      d.amount = d.amount.replace(/[^0-9.-]+/g,\"\");  //regular expression to convert currency to Numeric form\n    });\n  }\n \n\n\n\n\nshowChartAccounts() {\n\n  \n  const margin = { top: 50, right: 50, bottom: 50, left: 50 };\n  var width = 960 - margin.left - margin.right;\n  var height = 500 - margin.top - margin.bottom;\n  var svg = d3.select(\"#barChart\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n  \n  svg.selectAll(\"*\").remove();\n\n  var x = d3.scaleBand().range([0, width]);\n  var y = d3.scaleLinear().range([height, 0]);\n\n  x.domain(this.state.data.map(details => details.account));\n  y.domain([0, d3.max(this.state.data.map(details => details.balance))]);\n\n\n\n  svg.selectAll(\".bar\")\n    .data(this.state.data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"x\", d => x(d.account))\n    .attr(\"width\", x.bandwidth() - 10)\n    .attr(\"y\", d => y(d.balance))\n    .attr(\"height\", d => height - y(d.balance));\n\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n\n  svg.append(\"g\")\n    .call(d3.axisLeft(y));\n}\n\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h1 className=\"App-title\">NUSmoney App by Anuflora Bank</h1>\n        </header>\n\n        <button\n            className=\"acc-btn\"\n            onClick={() => this.accountsButton()}\n          >\n            Get Accounts Data\n          </button>\n\n        <table className=\"myTable\">\n          <tbody>\n          {this.state.data.map((item) => {\n            return (\n              <tr key={item.id}>\n                <td> {item.account} </td>\n                <td> {item.balance} </td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </table>\n        \n\n        <h2> Visualisation of Data</h2>\n        <div id=\"visualisation\">\n            <svg id=\"barChart\"></svg>\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}